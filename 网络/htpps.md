# 为什么要用https
保证数据传输的安全, 因为http是明文传输的。
# 过程
CA证书、非对称加密、对称加密
- 非对称加密: 服务器把公钥传给浏览器，浏览器后续传输的数据用公钥加密，服务器得到后，用自己的私钥解密，这个过程是安全的，
但是服务器用公钥加密的数据传给客户端，客户端没有私钥无法解密，如果服务器用私钥加密数据，客户端用公钥解密，虽然是可行的，但是这个
公钥是明文传输的，会被人获取，造成不安全。
如果服务器的公钥私钥组合，浏览器也有公钥私钥组合，分别把各自的公钥传给对方呢，虽然是保证了2个方向的数据安全，但是性能很低。
所以数据的传输要用对称加密，一个密钥进行加解密才能是性能最好的。
- 对称加密：服务器把密钥传给浏览器，后续所有传输都通过该密钥进行加密解密，对称加密过程是性能最好的。但是第一次传送密钥的过程中，
密钥会被他人获取，因为是明文传送的，那有没有办法，把这个密钥加密传输呢，可以考虑到非对称加密传输这个密钥。
- 非对称加密方式传输密钥：
服务器传输公钥A给浏览器，浏览器生成的一个密钥通过公钥加密传给服务器，服务器通过私钥解密得到密钥，后续数据传输用该密钥加密解密。
看似完美了，但是这个公钥是通过明文传输的，中间人可以劫持这个公钥，然后把伪造的公钥B传给浏览器，浏览器用公钥B加密密钥后，中间人
通过私钥B'解密得到密钥，然后再把密钥通过公钥A加密后传给服务器（因为服务器只能解密通过自身公钥A加密的数据），服务器也得到了密钥，
虽然浏览器服务器都通过密钥传输数据，但是对于中间人来说，这个数据是透明的。
结论：该方式也不能保证数据安全。
- CA证书方式：
服务器把公钥和一些信息传给CA机构，CA机构通过私钥加密服务器的明文数据（不加密公钥），生成数字签名，原明文信息通过散列函数，hash一下生成散列值，
然后把带有公钥、数字签名、散列值的证书传给服务器，服务器把该证书传给浏览器，
浏览器查找本身自带的CA公钥解密数字签名后，和散列值（该值通过hash算法解开后）进行对比，如果一致，则验证该证书合法，
继续采用上述非对称方式，用公钥加密密钥，传给服务器，服务器再用私钥解密得到密钥，后续采用对称加密方式加解密数据进行传输。
问题：中间人劫持CA证书篡改怎么办？中间人没有CA机构的公钥，无法解密数字签名，故无法篡改数字签名信息。
      中间人劫持CA证书，用自己申请的CA证书传给浏览器？浏览器通过查找公钥解密后，得到的只能是中间人的服务器信息，
      和要访问的服务器不一致，判定该证书失效，中止传输数据。

# 为什么要通过这三个过程
为什么最后一步用对称加密：因为为了使用前两步最后定义的一个随机密钥，这个密钥必须是客户端生成的，而且安全的传送到服务端（非对称加密传送方法）
为什么不能使用非对称加密：只能保证一个方向的数据传输安全，客户端到服务端之间传送数据可以保证安全（公钥加密 私钥解密），但是服务端到客户端就无法保证，因为公钥可能被黑客获取。
为什么要使用CA证书获取license: 为了获取服务端的公钥，这是第二步进行非对称加密随机密码的先觉条件。
                            服务端把公钥通过CA私钥进行加密，然后传给客户端，客户端通过本地系统的CA公要进行非对称解密。得到服务端的公钥                  
# HttpS每次请求都要传输一次密钥吗？
如果每次都重复上述过程，影响性能。
采取的方式是第一次请求时服务器在session 中存密钥，后续每次请求，通过session 中查找对应密钥。


